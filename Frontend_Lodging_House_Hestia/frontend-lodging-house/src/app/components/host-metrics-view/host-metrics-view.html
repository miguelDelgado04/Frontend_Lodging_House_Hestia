<!-- ===== NAVBAR ===== -->
<nav class="topbar" role="navigation" aria-label="Barra principal">
  <div class="topbar__inner">
    <!-- Marca -->
    <a class="brand" routerLink="/applicationMainViewComponent">
      <span class="brand__logo" aria-hidden="true">
        <svg viewBox="0 0 24 24" width="18" height="18">
          <path d="M4 12l8-9 8 9-8 9-8-9z" fill="#2563eb" />
        </svg>
      </span>
      <span class="brand__name">Hestia</span>
    </a>

    <!-- links centro -->
    <ul class="top-links" role="list">
      <li><a href="#" class="is-active">Estadías</a></li>
      <li><a href="#">Experiencias</a></li>
      <li><a href="#">Online</a></li>
    </ul>

    <!-- derecha -->
    <div class="top-actions">
      <button class="link-btn"></button>

      <button class="icon-btn" aria-label="Idioma">
        <svg viewBox="0 0 24 24" class="icon">
          <path fill="currentColor"
            d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2Zm7.93 9h-3.18a15.3 15.3 0 0 0-1.06-5.12A8.013 8.013 0 0 1 19.93 11Z" />
        </svg>
      </button>

      <button class="avatar" aria-label="Perfil">
        <span>H</span>
      </button>
    </div>
  </div>
</nav>

<!-- ===== PAGE ===== -->
<main class="page">
  <div class="page__inner">
    <!-- Header -->
    <header class="page-head">
      <div>
        <h1 class="title">Dashboard de Anfitrión</h1>
        <p class="subtitle">Gestiona tus alojamientos y sigue su rendimiento.</p>
      </div>
    </header>

    <!-- Tabs -->
    <nav class="subtabs" aria-label="Secciones de dashboard">
      <button class="subtab">Alojamientos</button>
      <button class="subtab is-active">Rendimiento</button>
      <button class="subtab">Opiniones</button>
      <button class="subtab">Ingresos</button>
    </nav>

    <!-- Resumen de rendimiento -->
    <section class="section">
      <h2 class="section-title">Resumen de rendimiento</h2>

      <div class="summary-grid">
        <!-- Card total reservas -->
        <article class="card">
          <header class="card-head">
            <h3>Total de reservas</h3>
          </header>

          <div class="card-main">
            <div class="metric">
              <p class="metric__value">{{ totalReservations }}</p>
              <div class="metric__chip metric__chip--green">
                <span>↑ {{ reservationsChange }}%</span>
                <span class="chip-note">vs. últimos 30 días</span>
              </div>
            </div>

            <div class="months">
              <span>Ene</span><span>Feb</span><span>Mar</span>
              <span>Abr</span>
              <span class="is-active">May</span>
              <span>Jun</span>
            </div>
          </div>
        </article>

        <!-- Card calificación promedio -->
        <article class="card">
          <header class="card-head card-head--filters">
            <div>
              <h3>Calificación promedio</h3>
            </div>
            <div class="head-filters">
              <div class="select">
                <select [(ngModel)]="selectedListingScope">
                  <option value="all">Todos los alojamientos</option>
                  <option value="top">Mejor rendimiento</option>
                </select>
              </div>
              <div class="select">
                <select [(ngModel)]="selectedRange">
                  <option value="7">Últimos 7 días</option>
                  <option value="30">Últimos 30 días</option>
                  <option value="90">Últimos 90 días</option>
                </select>
              </div>
            </div>
          </header>

          <div class="card-main card-main--rating">
            <div class="rating-text">
              <p class="metric__value">{{ avgRating }}</p>
              <div class="metric__chip metric__chip--red">
                <span>↓ {{ ratingChange }}%</span>
                <span class="chip-note">vs. últimos 30 días</span>
              </div>
            </div>

            <div class="gauge">
              <div
                class="gauge__circle"
                [style.background]="
                  'conic-gradient(#2563eb ' + ratingPercent + '%, #e5e7eb 0)'
                ">
              </div>
              <div class="gauge__center">
                <span class="gauge__value">{{ avgRating }}</span>
                <span class="gauge__label">/ 5</span>
              </div>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- Rendimiento por alojamiento -->
    <section class="section">
      <div class="section-head">
        <h2 class="section-title">Rendimiento por alojamiento</h2>
        <div class="section-meta">
          <span class="muted">Ingresos totales:</span>
          <strong>{{ formattedTotalRevenue }}</strong>
        </div>
      </div>

      <div class="table">
        <div class="row row--head">
          <div>Alojamiento</div>
          <div class="ta-center">Reservas</div>
          <div class="ta-center">Calificación prom.</div>
          <div class="ta-right">Ingresos</div>
        </div>

        <div class="row" *ngFor="let p of properties">
          <div>{{ p.name }}</div>
          <div class="ta-center">{{ p.reservations }}</div>
          <div class="ta-center">
            <span class="star">★</span>
            {{ p.rating }}
          </div>
          <div class="ta-right">
            ${{ p.revenue | number : '1.0-0' }}
          </div>
        </div>
      </div>
    </section>
  </div>
</main>
